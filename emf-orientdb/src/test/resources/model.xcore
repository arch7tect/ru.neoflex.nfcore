@GenModel(
    bundleManifest="false",
    modelDirectory="emf-orientdb/src/test/java-gen",
    rootExtendsClass="org.eclipse.emf.ecore.impl.MinimalEObjectImpl",
    complianceLevel="7.0"
)
package ru.neoflex.meta.test
import org.eclipse.emf.ecore.EObject
import org.eclipse.emf.ecore.EPackage
import org.eclipse.emf.ecore.EClass
import java.util.List

annotation "http://orientdb.com/meta" as orientdb

abstract class Authority {
    String qName
}

class Group extends Authority {
}

class User extends Authority {
    refers Group group
}

class Column {
	String name
	String dbType
}

@orientdb(embedded="true", oAbstract="true")
abstract class DBKey {
	String name
    @orientdb(embedded="true")
	refers Column[] columns
}

class PKey extends DBKey {}

class IEKey extends DBKey {
	boolean isUnique
}

class FKey extends DBKey {
    @orientdb(embedded="true")
	refers DBEntity entity
}

abstract class DBEntity {
	String qName
	contains PKey pKey
}

class DBTable extends DBEntity {
	contains Column[] columns
	contains IEKey[] indexes
	contains FKey[] fKeys
}

class DBView extends DBEntity {
	refers Column[] columns
	boolean isMaterialized
}

class MetaView {
	id String qName
	refers EPackage aPackage
	refers EClass aClass
	refers EObject aObject
}

type List3OfDouble wraps List<List<List<Double>>>

@orientdb(embedded="true", oClassName="OPoint")
class OPoint {
    Double[] coordinates
}

@orientdb(embedded="true", oClassName="OMultiPolygon")
class OMultiPolygon {
    List3OfDouble[] coordinates
}

class Placemark {
    @orientdb(indexType="FULLTEXT")
    String name
    @orientdb(indexType="FULLTEXT")
    String description
    @orientdb(indexType="SPATIAL")
    contains OPoint point
}